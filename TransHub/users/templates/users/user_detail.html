{% extends 'main/base.html' %}
{% load static %}
{% load main_extras %}

{% block content %}

<style>
 .container2 {
    background-color: white;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.main-content {
    flex: 2;
    padding-right: 20px;
}
.sidebar5 {
    flex: 1;
    padding-left: 20px;
    max-width: 300px;
}

.sidebar5 h4 {
    margin-top: 0;
}

.sidebar5 ul {
    list-style-type: none;
    padding: 0;
}

.sidebar5 li {
    margin-bottom: 10px;
}
.container2 {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}
</style>


<div class=" container2 m-2">
     <div class="main-content">
    <h4>{{ user2.get_full_name }}</h4>
        {% if user2.photo %}
            <p><img alt="" width="100" height="100" class="rounded-circle me-2" src="{{user2.photo.url}}"></p>
        {% else %}
        <img src="{% static 'main/images/def_logo.webp' %}" alt="" width="100" height="100" class="rounded-circle me-2">
        {% endif %}
    <div class="company">
        <strong>Компанія:</strong> {{ user2.name_company }}
        <div class="star-rating">
                            <div class="stars-outer">
                                <div class="stars-inner" style="width: {{ user2.rating|floatformat:0 }}%;"></div>
                            </div>
                        </div>
        </div>

    <p><strong>О користувачі:</strong>
         {% if user2.about %}
        {{ user2.about }}
    {% else %}
          Немає інформації
        {% endif %}
    </p>
    <p><strong>Телефон:</strong>
    {% if user2.tel %}
        +{{ user2.tel }}
    {% else %}
          Немає інформації
        {% endif %}
        <strong>Електронна Пошта:</strong>
    {% if user2.email %}
        {{ user2.email }}
    {% else %}
          Немає інформації
        {% endif %}
    </p>

    <p><strong>Роль:</strong> {{ user2.get_role_display }}</p>
    <p><strong>Кількість перевезень:</strong> {{ ev_count }}</p>
    <p><strong>Кількість відгуків:</strong> {{ reviews.count }}</p>
    <p><strong>Кількість скарг:</strong> {{ claims.count }}</p>

    <h4>Напрямки роботи:</h4>
    <ul>
        {% for direction in user2.activity_directions.all %}
            <li>{{ direction.name }}</li>
        {% endfor %}
    </ul>
    <a href="{% url 'users:user_list' %}">До списку користувачів</a>
 </div>
    <div class="sidebar5">
        <h4>Відгуки ({{ reviews.count }})</h4>
        <ul>
            {% for review in reviews %}
                <li>{{ review.user }} — {{ review.comment }} —
            <div class="star-rating">
                            <div class="stars-outer">
                                <div class="stars-inner" style="width: {{ review.rating|mul:20|floatformat:0 }}%;"></div>
                            </div>
                        </div>
                </li>
            {% endfor %}
        </ul>

        <h4>Скарги ({{ claims.count }})</h4>
        <ul>
            {% for claim in claims %}
                <li>{{ claim.description }} — <strong>Дата:</strong> {{ claim.date }}</li>
            {% endfor %}
        </ul>
    </div>


</div>
{% endblock %}